#!/usr/bin/zsh

echo "lfg" >> /home/ark/win-log

if [[ $1 == "prev" ]] && [[ -f /tmp/prev-submap ]]; then
  submap=$(< /tmp/prev-submap)
  if [[ $submap == "default" ]]; then
    submap="reset"
  fi
else
  submap=$1
fi

echo $submap >> /home/ark/win-log


hyprctl submap | head -1 > /tmp/prev-submap 2>>/home/ark/win-log

declare -A bordercolors
bordercolors=(
  move     "rgb(4695bd)"
  resize   "rgb(46bd80)"
  launch   "rgb(944540)"
  insert   "rgb(2b2b2b)"
  cursor   "rgb(00000000)"
  reset    "rgb(bd4e46)"
)

hyprctl keyword group:groupbar:col.locked_active $bordercolors[$submap]
hyprctl keyword group:groupbar:col.active $bordercolors[$submap]
hyprctl keyword general:col.active_border $bordercolors[$submap]
hyprctl keyword group:col.border_active $bordercolors[$submap]
hyprctl dispatch submap $submap
echo "success" >> /home/ark/win-log
